var l=Object.defineProperty;var a=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;var n=(t,i,e)=>i in t?l(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e,o=(t,i)=>{for(var e in i||(i={}))c.call(i,e)&&n(t,e,i[e]);if(a)for(var e of a(i))d.call(i,e)&&n(t,e,i[e]);return t};import{n as u}from"./index.70a8f19e.js";import"./vendor.6aa46313.js";var m=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-container",{staticClass:"mt-4"},[e("v-row",[e("v-col",[e("v-card",{attrs:{flat:""}},[e("v-card-title",[e("v-icon",{attrs:{left:""}},[t._v(" mdi-palette ")]),e("span",[t._v("Appearance")])],1),e("v-card-text",[e("v-btn-toggle",{attrs:{mandatory:"",color:"primary"},model:{value:t.appearance,callback:function(s){t.appearance=s},expression:"appearance"}},[e("v-btn",{attrs:{value:"auto"}},[e("v-icon",{staticClass:"neutral ml-0",attrs:{left:"",small:""}},[t._v(" mdi-creation ")]),e("span",[t._v("Automatic")])],1),e("v-btn",{attrs:{value:"light"}},[e("v-icon",{staticClass:"neutral ml-0",attrs:{left:"",small:""}},[t._v(" mdi-brightness-5 ")]),e("span",[t._v("Light")])],1),e("v-btn",{attrs:{value:"dark"}},[e("v-icon",{staticClass:"neutral ml-0",attrs:{left:"",small:""}},[t._v(" mdi-brightness-2 ")]),e("span",[t._v("Dark")])],1)],1),e("div",{staticClass:"mt-2 ml-1"},[t._v(" "+t._s(t.appearanceHint)+"."),e("span",{directives:[{name:"show",rawName:"v-show",value:t.testmode,expression:"testmode"}]},[t._v(" Temporarily toggle with CTRL+SHIFT+L anywhere.")])])],1),e("v-card-title",[e("v-icon",{attrs:{left:""}},[t._v(" mdi-cursor-pointer ")]),e("span",[t._v("Behavior")])],1),e("v-card-text",[e("v-row",[e("v-col",[e("v-switch",{staticClass:"mb-4 mt-0",attrs:{label:"Job purge confirmation",hint:"Job purge requires clicking the button twice.","persistent-hint":""},model:{value:t.confirmpurge,callback:function(s){t.confirmpurge=s},expression:"confirmpurge"}}),e("v-switch",{staticClass:"mb-4 mt-0",attrs:{loading:t.loading,outlined:"",label:"Verify hash format",hint:"Check if the format of every user-entered hash is valid.","persistent-hint":""},model:{value:t.settings.verify_hash_format,callback:function(s){t.$set(t.settings,"verify_hash_format",s)},expression:"settings.verify_hash_format"}})],1),e("v-col",[e("v-switch",{staticClass:"mb-4 mt-0",attrs:{loading:t.loading,outlined:"",label:"Add new hosts to running jobs",hint:"Automatically assign newly connected hosts to currently running jobs.","persistent-hint":""},model:{value:t.settings.auto_add_hosts_to_running_jobs,callback:function(s){t.$set(t.settings,"auto_add_hosts_to_running_jobs",s)},expression:"settings.auto_add_hosts_to_running_jobs"}}),e("v-switch",{staticClass:"mb-4 mt-0",attrs:{loading:t.loading,outlined:"",label:"Fully benchmark new hosts",hint:"Run a complete first-time benchmark on new hosts connected to the system.","persistent-hint":""},model:{value:t.settings.bench_all,callback:function(s){t.$set(t.settings,"bench_all",s)},expression:"settings.bench_all"}})],1)],1),e("v-row",[e("v-text-field",{staticClass:"mb-4",attrs:{loading:t.loading,outlined:"",type:"number",label:"Benchmark runtime limit",hint:"Maximum duration for the benchmark to run. A shorter duration may result in quicker but less precise speed results.","persistent-hint":"",suffix:"seconds"},model:{value:t.settings.bench_runtime_limit,callback:function(s){t.$set(t.settings,"bench_runtime_limit",s)},expression:"settings.bench_runtime_limit"}})],1),e("v-row",[e("v-text-field",{staticClass:"mb-4",attrs:{loading:t.loading,outlined:"",type:"number",label:"Default time per workunit",min:10,hint:t.wuTimeHint,color:t.settings.default_seconds_per_workunit<t.wutthresh?"warning":"","persistent-hint":"",suffix:"seconds"},model:{value:t.settings.default_seconds_per_workunit,callback:function(s){t.$set(t.settings,"default_seconds_per_workunit",s)},expression:"settings.default_seconds_per_workunit"}})],1),e("v-row",[e("v-text-field",{staticClass:"mb-4",attrs:{loading:t.loading,outlined:"",type:"number",label:"Workunit status update frequency",hint:"Specifies how often the agent reports the status of a workunit to the server.","persistent-hint":"",suffix:"seconds"},model:{value:t.settings.workunit_status_update,callback:function(s){t.$set(t.settings,"workunit_status_update",s)},expression:"settings.workunit_status_update"}})],1)],1),e("v-card-title",[e("v-icon",{attrs:{left:""}},[t._v(" mdi-alert-circle-outline ")]),e("span",[t._v("Notifications")])],1),e("v-card-text",[e("v-switch",{staticClass:"mb-4 mt-0",attrs:{loading:t.loading,outlined:"",label:"Discord notifications","persistent-hint":""},model:{value:t.settings.discord_notifications,callback:function(s){t.$set(t.settings,"discord_notifications",s)},expression:"settings.discord_notifications"}}),e("v-text-field",{staticClass:"mb-4 mt-0",attrs:{outlined:"",label:"Discord webhook ID","persistent-hint":""},model:{value:t.settings.discord_webhook_id,callback:function(s){t.$set(t.settings,"discord_webhook_id",s)},expression:"settings.discord_webhook_id"}}),e("v-text-field",{staticClass:"mb-4 mt-0",attrs:{outlined:"",label:"Discord webhook token",type:"password","persistent-hint":""},model:{value:t.settings.discord_webhook_token,callback:function(s){t.$set(t.settings,"discord_webhook_token",s)},expression:"settings.discord_webhook_token"}}),e("v-divider"),e("v-switch",{staticClass:"mb-4 mt-0",attrs:{loading:t.loading,outlined:"",label:"Telegram notifications","persistent-hint":""},model:{value:t.settings.telegram_notifications,callback:function(s){t.$set(t.settings,"telegram_notifications",s)},expression:"settings.telegram_notifications"}}),e("v-text-field",{staticClass:"mb-4 mt-0",attrs:{outlined:"",label:"Telegram bot token",type:"password","persistent-hint":""},model:{value:t.settings.telegram_bot_token,callback:function(s){t.$set(t.settings,"telegram_bot_token",s)},expression:"settings.telegram_bot_token"}}),e("v-text-field",{staticClass:"mb-4 mt-0",attrs:{outlined:"",label:"Telegram chat ID","persistent-hint":""},model:{value:t.settings.telegram_chat_id,callback:function(s){t.$set(t.settings,"telegram_chat_id",s)},expression:"settings.telegram_chat_id"}}),e("v-divider"),e("v-switch",{staticClass:"mb-4 mt-0",attrs:{loading:t.loading,outlined:"",label:"E-mail notifications","persistent-hint":""},model:{value:t.settings.email_notifications,callback:function(s){t.$set(t.settings,"email_notifications",s)},expression:"settings.email_notifications"}}),e("v-text-field",{staticClass:"mb-4 mt-0",attrs:{outlined:"",label:"E-mail address","persistent-hint":""},model:{value:t.settings.email_address,callback:function(s){t.$set(t.settings,"email_address",s)},expression:"settings.email_address"}}),e("v-text-field",{staticClass:"mb-4 mt-0",attrs:{outlined:"",label:"E-mail (app) password",type:"password","persistent-hint":""},model:{value:t.settings.email_password,callback:function(s){t.$set(t.settings,"email_password",s)},expression:"settings.email_password"}})],1)],1),e("v-expansion-panels",{staticClass:"mt-6",attrs:{flat:""}},[e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"px-4",scopedSlots:t._u([{key:"default",fn:function(s){return s.open,[e("span",{staticClass:"d-flex align-center"},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-puzzle ")]),e("span",{staticClass:"text-h6"},[t._v("Advanced Settings")])],1)]}}])}),e("v-expansion-panel-content",[e("v-card-text",[e("v-text-field",{staticClass:"mb-4",attrs:{loading:t.loading,outlined:"",type:"number",min:"5",label:"Workunit timeout factor",hint:"Multiplying factor for workunit timeout \u2014 the time after which a workunit is considered failed.","persistent-hint":""},model:{value:t.settings.workunit_timeout_factor,callback:function(s){t.$set(t.settings,"workunit_timeout_factor",s)},expression:"settings.workunit_timeout_factor"}}),e("v-text-field",{staticClass:"mb-4",attrs:{loading:t.loading,outlined:"",type:"number",label:"Temperature threshold",hint:"Abort cracking if temperature of the client's PC reaches this threshold","persistent-hint":"",suffix:"\xB0C"},model:{value:t.settings.hwmon_temp_abort,callback:function(s){t.$set(t.settings,"hwmon_temp_abort",s)},expression:"settings.hwmon_temp_abort"}}),e("v-switch",{staticClass:"mb-4",attrs:{label:"Developer mode",hint:"Enables useful utilities throughout the app when developing Hashstation.","persistent-hint":""},model:{value:t.testmode,callback:function(s){t.testmode=s},expression:"testmode"}})],1)],1)],1)],1)],1)],1)],1)},h=[];const g={name:"Settings",data:function(){return{appearance:localStorage.getItem("appearance")||"auto",testmode:localStorage.getItem("testmode")=="true"||!1,settings:{},loading:!0,saving:!1,wutthresh:180,confirmpurge:!localStorage.hasOwnProperty("confirmpurge")||localStorage.getItem("confirmpurge")=="true"}},computed:{appearanceHint(){switch(this.appearance){case"auto":return"Hashstation will change appearance dynamically based on your system theme";case"light":return"Hashstation will retain light appearance regardless of your system theme";case"dark":return"Hashstation will retain dark appearance regardless of your system theme";default:return}},wuTimeHint(){return this.settings.default_seconds_per_workunit&&this.settings.default_seconds_per_workunit<this.wutthresh?"Setting extremely low time per workunit leads to high overhead. Cracking may take much longer than estimated. Consider choosing a higher default value.":"The time per workunit preference used for new jobs. You can change it on a per-job basis in the additional settings step when creating a job or via the edit job dialog."}},watch:{appearance(t){localStorage.setItem("appearance",t),t=="dark"&&(this.$vuetify.theme.dark=!0),t=="light"&&(this.$vuetify.theme.dark=!1),t=="auto"&&(this.$vuetify.theme.dark=window.matchMedia("(prefers-color-scheme: dark)").matches)},testmode(t){localStorage.setItem("testmode",t)},confirmpurge(t){localStorage.setItem("confirmpurge",t)},settings:{deep:!0,immediate:!1,handler(t,i){!this.loading&&Object.keys(i).length>0&&this.saveSettings()}}},mounted(){this.loadSettings()},beforeRouteLeave(t,i,e){this.saving||e()},methods:{async loadSettings(){this.loading=!0,this.axios.get(this.$serverAddr+"/settings").then(t=>{this.settings=t.data,this.loading=!1})},saveSettings(){if(this.settings.workunit_timeout_factor<5){this.$error("Workunit timeout factor cannot be smaller than 5.");return}this.saving=!0,this.axios.post(this.$serverAddr+"/settings",o({},this.settings)).then(()=>{this.saving=!1,this.$store.state.jobForm.timeForJob=this.settings.default_seconds_per_workunit})}}},r={};var p=u(g,m,h,!1,_,"53224a23",null,null);function _(t){for(let i in r)this[i]=r[i]}var w=function(){return p.exports}();export{w as default};
